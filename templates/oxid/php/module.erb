<?php

define('OX_IS_ADMIN', 1);

if (!defined('OX_BASE_PATH')) {
    define('OX_BASE_PATH', dirname(__FILE__) . DIRECTORY_SEPARATOR );
}

if ( !function_exists( 'getShopBasePath' )) {
	function getShopBasePath() { 
		return OX_BASE_PATH; 
	} 
}

if (file_exists(getShopBasePath().'bootstrap.php')) {
	require_once getShopBasePath() . "bootstrap.php";

	$sModule = '<%= @name %>';
    $oModule = oxNew('oxModule');
    
    if (!$oModule->load($sModule)) {
    	exit(-1);
    }
    
    try {
        if ( $oModule-><%= @command %>() ) {
            $this->_aViewData["updatenav"] = "1";
            
            $oCache = oxNew( 'oxcache' );
       		$oCache->reset();
        }
    } catch (oxException $oEx) {
        exit(-1);
    }
} else {
	exit(-2);
}

exit(0);